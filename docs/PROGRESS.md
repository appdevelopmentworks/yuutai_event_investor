# ğŸ“Š å®Ÿè£…é€²æ—ãƒ¬ãƒãƒ¼ãƒˆ

## å®Ÿæ–½æ—¥æ™‚
2024å¹´11æœˆ07æ—¥

---

## âœ… å®Œäº†ã—ãŸä½œæ¥­

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…

#### ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«
- `src/core/database.py` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚¯ãƒ©ã‚¹
- `scripts/init_database.py` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

#### å®Ÿè£…å†…å®¹
- **DatabaseManagerã‚¯ãƒ©ã‚¹**
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šç®¡ç†
  - éŠ˜æŸ„ãƒã‚¹ã‚¿æ“ä½œï¼ˆè¿½åŠ ã€å–å¾—ã€ä¸€è¦§å–å¾—ï¼‰
  - æ ªä¾¡å±¥æ­´æ“ä½œï¼ˆè¿½åŠ ã€å–å¾—ï¼‰
  - ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ“ä½œ
  - ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆç®¡ç†
  - ã‚¹ã‚­ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

- **åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**
  - create_tables.sqlã‹ã‚‰ã®è‡ªå‹•åˆæœŸåŒ–
  - ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ï¼ˆ7éŠ˜æŸ„ï¼‰
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…å®¹ã®ç¢ºèªãƒ»æ¤œè¨¼

#### å‹•ä½œç¢ºèªæ–¹æ³•
```bash
python scripts/init_database.py
```

---

### 2. æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ç§»æ¤

#### ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«
- `src/utils/ticker_utils.py` - ãƒ†ã‚£ãƒƒã‚«ãƒ¼ã‚³ãƒ¼ãƒ‰å‡¦ç†
- `src/core/calculator.py` - æœŸå¾…å€¤è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³

#### å®Ÿè£…å†…å®¹
- **ticker_utils.py**
  - `check_ticker()`: æ—¥æœ¬æ ªã®.Tã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹è¿½åŠ 
  - `is_japanese_stock()`: æ—¥æœ¬æ ªåˆ¤å®š
  - `normalize_ticker()`: ãƒ†ã‚£ãƒƒã‚«ãƒ¼ã‚³ãƒ¼ãƒ‰æ­£è¦åŒ–
  - `extract_code()`: è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰æŠ½å‡º

- **calculator.py**
  - `calculate_returns()`: ãƒªã‚¿ãƒ¼ãƒ³è¨ˆç®—ã¨ãƒˆãƒ¬ãƒ¼ãƒ‰åˆ†é¡
  - `calculate_statistics()`: çµ±è¨ˆæƒ…å ±ç®—å‡ºï¼ˆå‹ç‡ã€æœŸå¾…å€¤ãªã©ï¼‰
  - `find_optimal_timing()`: æœ€é©è²·å…¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ¤œç´¢ï¼ˆTODOï¼‰

---

### 3. UIãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ä½œæˆ

#### ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«
- `src/ui/main_window.py` - ãƒ¡ã‚¤ãƒ³ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
- `main.py` - ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆæ›´æ–°

#### å®Ÿè£…å†…å®¹
- **MainWindowã‚¯ãƒ©ã‚¹**
  - ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã€ãƒœã‚¿ãƒ³é¡ï¼‰
  - å·¦ãƒ‘ãƒãƒ«ï¼ˆéŠ˜æŸ„ãƒªã‚¹ãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ï¼‰
  - å³ãƒ‘ãƒãƒ«ï¼ˆè©³ç´°åˆ†æè¡¨ç¤ºã‚¨ãƒªã‚¢ï¼‰
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼
  - ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆæ›´æ–°ã€è¨­å®šã€ãƒ†ãƒ¼ãƒåˆ‡æ›¿ï¼‰

- **UIã®ç‰¹å¾´**
  - ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒå¯¾å¿œ
  - ã‚¹ãƒ—ãƒªãƒƒã‚¿ãƒ¼ï¼ˆã‚µã‚¤ã‚ºèª¿æ•´å¯èƒ½ï¼‰
  - ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã§ä»Šå¾Œã®å®Ÿè£…ç®‡æ‰€ã‚’æ˜ç¤º

#### å‹•ä½œç¢ºèªæ–¹æ³•
```bash
# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆ
python main.py
```

---

### 4. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä½œæˆ

#### ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«
- `tests/test_database.py` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆ
- `scripts/test_setup.py` - å‹•ä½œç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

#### å®Ÿè£…å†…å®¹
- **test_database.py**
  - DatabaseManagerã®å…¨ãƒ¡ã‚½ãƒƒãƒ‰ãƒ†ã‚¹ãƒˆ
  - ticker_utilsã®å…¨é–¢æ•°ãƒ†ã‚¹ãƒˆ
  - pytestå¯¾å¿œ

- **test_setup.py**
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ©Ÿèƒ½ã®ç¢ºèª
  - ãƒ†ã‚£ãƒƒã‚«ãƒ¼ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ç¢ºèª
  - è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³ã®ç¢ºèª
  - UIé–¢é€£ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®ç¢ºèª

#### å‹•ä½œç¢ºèªæ–¹æ³•
```bash
# pytestã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/test_database.py -v

# å‹•ä½œç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
python scripts/test_setup.py
```

---

## ğŸ“ ä½œæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

```
yuutai_event_investor/
â”œâ”€â”€ main.py                          âœ… æ›´æ–°
â”œâ”€â”€ requirements.txt                 âœ… æ—¢å­˜
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ database.py             âœ… æ–°è¦ä½œæˆ
â”‚   â”‚   â””â”€â”€ calculator.py           âœ… æ–°è¦ä½œæˆ
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ ticker_utils.py         âœ… æ–°è¦ä½œæˆ
â”‚   â””â”€â”€ ui/
â”‚       â””â”€â”€ main_window.py          âœ… æ–°è¦ä½œæˆ
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ __init__.py                 âœ… æ–°è¦ä½œæˆ
â”‚   â”œâ”€â”€ init_database.py            âœ… æ–°è¦ä½œæˆ
â”‚   â””â”€â”€ test_setup.py               âœ… æ–°è¦ä½œæˆ
â”‚
â””â”€â”€ tests/
    â””â”€â”€ test_database.py            âœ… æ–°è¦ä½œæˆ
```

---

## ğŸ§ª å‹•ä½œç¢ºèªæ¸ˆã¿æ©Ÿèƒ½

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
- âœ… éŠ˜æŸ„ã®è¿½åŠ ãƒ»å–å¾—
- âœ… æ¨©åˆ©ç¢ºå®šæœˆã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- âœ… ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆç®¡ç†
- âœ… ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥

### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- âœ… ãƒ†ã‚£ãƒƒã‚«ãƒ¼ã‚³ãƒ¼ãƒ‰å¤‰æ›
- âœ… æ—¥æœ¬æ ªåˆ¤å®š
- âœ… ã‚³ãƒ¼ãƒ‰æ­£è¦åŒ–

### è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³
- âœ… çµ±è¨ˆæƒ…å ±è¨ˆç®—ï¼ˆå‹ç‡ã€æœŸå¾…å€¤ï¼‰
- âœ… ãƒˆãƒ¬ãƒ¼ãƒ‰åˆ†é¡ï¼ˆå‹ã¡/è² ã‘ï¼‰

### UI
- âœ… ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤º
- âœ… ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹ç¯‰
- âœ… ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ

---

## ğŸš§ æœªå®Ÿè£…ãƒ»TODOé …ç›®

### å„ªå…ˆåº¦: é«˜
1. **yfinanceãƒ‡ãƒ¼ã‚¿å–å¾—**
   - `src/core/data_fetcher.py` ã®ä½œæˆ
   - æ ªä¾¡ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã¨ä¿å­˜
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½

2. **ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ³å®Œå…¨å®Ÿè£…**
   - `calculator.py` ã® `find_optimal_timing()` å®Ÿè£…
   - è¤‡æ•°æ—¥æ•°ã®ã‚¹ã‚­ãƒ£ãƒ³
   - æœ€é©ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®è‡ªå‹•é¸æŠ

3. **éŠ˜æŸ„ãƒªã‚¹ãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ**
   - ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º
   - ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
   - ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½

### å„ªå…ˆåº¦: ä¸­
4. **è©³ç´°åˆ†æãƒ‘ãƒãƒ«**
   - ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º
   - çµ±è¨ˆæƒ…å ±ã‚«ãƒ¼ãƒ‰
   - ãƒˆãƒ¬ãƒ¼ãƒ‰å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«

5. **ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ©Ÿèƒ½**
   - `src/scraping/scraper.py` ã®ä½œæˆ
   - 96ut.com ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

6. **è¨­å®šãƒ€ã‚¤ã‚¢ãƒ­ã‚°**
   - è¨­å®šå€¤ã®èª­ã¿è¾¼ã¿ãƒ»ä¿å­˜
   - ãƒ†ãƒ¼ãƒåˆ‡æ›¿
   - ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š

### å„ªå…ˆåº¦: ä½
7. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½**
   - CSVå‡ºåŠ›
   - ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆä¿å­˜

8. **é€šçŸ¥æ©Ÿèƒ½**
   - è²·å…¥æ—¥é€šçŸ¥
   - ãƒ‡ãƒ¼ã‚¿æ›´æ–°é€šçŸ¥

---

## ğŸ“Š é€²æ—ç‡

| ã‚«ãƒ†ã‚´ãƒª | å®Œäº† | é€²æ—ç‡ |
|---------|------|--------|
| åŸºç›¤æ§‹ç¯‰ | 5/5 | 100% |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | 1/1 | 100% |
| ã‚³ã‚¢æ©Ÿèƒ½ | 2/5 | 40% |
| UIå®Ÿè£… | 1/8 | 13% |
| ãƒ†ã‚¹ãƒˆ | 2/5 | 40% |
| **å…¨ä½“** | **11/24** | **46%** |

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆæ¨å¥¨é †åºï¼‰

### Step 1: yfinanceãƒ‡ãƒ¼ã‚¿å–å¾—å®Ÿè£…ï¼ˆ1-2æ—¥ï¼‰
```python
# src/core/data_fetcher.py
class DataFetcher:
    def fetch_stock_data(ticker, period):
        # yfinanceã§æ ªä¾¡ãƒ‡ãƒ¼ã‚¿å–å¾—
        pass
    
    def save_to_database(data):
        # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜
        pass
```

### Step 2: ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Œæˆï¼ˆ1-2æ—¥ï¼‰
```python
# calculator.pyã®find_optimal_timing()ã‚’å®Œæˆ
# éå»ãƒ‡ãƒ¼ã‚¿ã§å…¨æœŸé–“ã‚¹ã‚­ãƒ£ãƒ³
# æœ€é©ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¿”ã™
```

### Step 3: éŠ˜æŸ„ãƒªã‚¹ãƒˆUIå®Ÿè£…ï¼ˆ2-3æ—¥ï¼‰
```python
# src/ui/widgets/stock_list_widget.py
# QTableWidgetã§ã®éŠ˜æŸ„ãƒªã‚¹ãƒˆè¡¨ç¤º
# ã‚½ãƒ¼ãƒˆã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
```

### Step 4: çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ1æ—¥ï¼‰
```bash
# ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã§ã®å‹•ä½œç¢ºèª
# å®Ÿéš›ã®éŠ˜æŸ„ã§ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
# UIã§ã®è¡¨ç¤ºç¢ºèª
```

---

## ğŸ’¡ é–‹ç™ºTips

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
```python
from src.core.database import DatabaseManager

db = DatabaseManager()

# éŠ˜æŸ„è¿½åŠ 
db.insert_stock(code="9202", name="ANA", rights_month=3)

# å…¨éŠ˜æŸ„å–å¾—
stocks = db.get_all_stocks()

# 3æœˆéŠ˜æŸ„ã®ã¿
march_stocks = db.get_all_stocks(rights_month=3)
```

### ãƒ†ã‚£ãƒƒã‚«ãƒ¼å‡¦ç†
```python
from src.utils.ticker_utils import normalize_ticker

# æ—¥æœ¬æ ªå‡¦ç†
ticker = normalize_ticker("9202")  # -> "9202.T"
```

### çµ±è¨ˆè¨ˆç®—
```python
from src.core.calculator import Calculator
import pandas as pd

calc = Calculator()
stats = calc.calculate_statistics(win_df, lose_df)
print(f"å‹ç‡: {stats['win_rate']}")
print(f"æœŸå¾…å€¤: {stats['expected_return']}")
```

---

## ğŸ› æ—¢çŸ¥ã®å•é¡Œ

1. **ãªã—** - ç¾æ™‚ç‚¹ã§é‡å¤§ãªå•é¡Œã¯ç™ºè¦‹ã•ã‚Œã¦ã„ã¾ã›ã‚“

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸](../docs/database_schema.md)
- [è¦æ±‚å®šç¾©æ›¸](../docs/requirements.md)
- [é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—](../docs/roadmap.md)
- [PySide6ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://doc.qt.io/qtforpython/)
- [yfinance](https://github.com/ranaroussi/yfinance)

---

## ğŸ“ è³ªå•ãƒ»ã‚µãƒãƒ¼ãƒˆ

å®Ÿè£…ã«é–¢ã™ã‚‹è³ªå•ã‚„å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

1. **å‹•ä½œç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œ**
   ```bash
   python scripts/test_setup.py
   ```

2. **ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç¢ºèª**
   ```bash
   pip install -r requirements.txt
   ```

3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–**
   ```bash
   python scripts/init_database.py
   ```

---

**ä½œæˆæ—¥**: 2024å¹´11æœˆ07æ—¥  
**æœ€çµ‚æ›´æ–°**: 2024å¹´11æœˆ07æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Phase 1 Week 2 å®Œäº†
